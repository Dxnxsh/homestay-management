<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>Manage</title>
    <link rel="stylesheet" href="../css/manageStyle.css">
    <link href='https://cdn.boxicons.com/3.0.5/fonts/basic/boxicons.min.css' rel='stylesheet'>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
<body>
  <div class="sidebar close">
    <div class="logo-details">
      <img src="../images/logo.png" alt="Serena Sanctuary logo" class="logo-icon">
      <span class="logo_name">Serena Sanctuary</span>
    </div>
    <ul class="nav-links">
      <li>
        <a href="dashboard.html">
          <i class='bxr  bx-dashboard'></i> 
          <span class="link_name">Dashboard</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="dashboard.html">Dashboard</a></li>
        </ul>
      </li>
      <li>
        <div class="icon-link">
          <a href="manage.html">
            <i class='bxr  bx-list-square'></i>
            <span class="link_name">Manage</span>
          </a>
          <i class='bx bxs-chevron-down arrow' ></i>
        </div>
        <ul class="sub-menu">
          <li><a class="link_name" href="manage.html">Manage</a></li>
          <li><a href="guests.html">Guests</a></li>
          <li><a href="staff.html">Staff</a></li>
          <li><a href="homestay.html">Homestay</a></li>
        </ul>
      </li>
      <li>
        <a href="billing.html">
          <i class='bxr  bx-print-dollar'></i>
          <span class="link_name">Billing</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="billing.html">Billing</a></li>
        </ul>
      </li>
      <li>
        <a href="bookings.html">
          <i class='bxr  bx-home-add'></i>
          <span class="link_name">Bookings</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="bookings.html">Bookings</a></li>
        </ul>
      </li>
      <li>
        <a href="calendar.html">
          <i class='bxr  bx-calendar-alt'></i> 
          <span class="link_name">Calendar</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="calendar.html">Calendar</a></li>
        </ul>
      </li>
      <li>
        <div class="icon-link">
          <a href="reports.html">
            <i class='bxr  bx-file-report'></i> 
            <span class="link_name">Reports</span>
          </a>
          <i class='bx bxs-chevron-down arrow' ></i>
        </div>
        <ul class="sub-menu">
          <li><a class="link_name" href="reports.html">Reports</a></li>
          <li><a href="fullReports.html">Full Reports</a></li>
          <li><a href="summary.html">Summary</a></li>
          <li><a href="analytics.html">Analytics</a></li>
        </ul>
      </li>
    <div class="profile-details">
      <div class="profile-content">
        <img src="../images/profile.png" alt="profileImg">
      </div>
      <div class="name-job">
        <div class="profile_name">Shafiq</div>
        <div class="job">Admin</div>
      </div>
      <i class='bxr  bx-arrow-out-left-circle-half'></i> 
    </div>
  </li>
</ul>
  </div>

  <section class="home-section">
    <!-- Header -->
    <div class="home-content">
      <i class='bx bx-menu' ></i>
      <span class="text">Serena Sanctuary</span>
    </div>
    <div class="page-heading">
      <h1>Manage</h1>
      <div class="date-card">
        <i class='bxr  bx-calendar-alt'></i>
        <div class="date-line" aria-live="polite">Loading dateâ€¦</div>
      </div>
    </div>
    <!-- Content -->
    <div class="content">
      <!-- Overview Stats -->
      <div class="content1">
        <a href="guests.html" class="sub-content1">
          <div class="subcard">
            <div class="subcard-number">67</div>
            <div class="subcard-text">Total Guests</div>
          </div>
          <i class='bxr  bxs-user'></i>
        </a>
        <a href="staff.html" class="sub-content1">
          <div class="subcard">
            <div class="subcard-number">14</div>
            <div class="subcard-text">Total Staff</div>
          </div>
          <i class='bxr  bxs-community'></i>
        </a>
        <a href="homestay.html" class="sub-content1">
          <div class="subcard">
            <div class="subcard-number">4</div>
            <div class="subcard-text">Total Homestay</div>
          </div>
          <i class='bxr  bxs-home-circle'></i>
        </a>
      </div>

      <!-- Guests Section -->
      <div class="content2">
        <div class="sub-content2-2">
          <a href="guests.html" class="sub-content2-card">
            <div class="subcard">
              <div class="subcard-number">8</div>
              <div class="subcard-text">New Guests</div>
            </div>
            <div class="mini-chart-container">
              <canvas id="miniChart1"></canvas>
            </div>
          </a>
          <a href="staff.html" class="sub-content2-card">
            <div class="subcard">
              <div class="subcard-number">5</div>
              <div class="subcard-text">New Full Time Staff</div>
            </div>
            <div class="mini-chart-container">
              <canvas id="miniChart2"></canvas>
            </div>
          </a>
          <a href="staff.html" class="sub-content2-card">
            <div class="subcard">
              <div class="subcard-number">3</div>
              <div class="subcard-text">New Part Time Staff</div>
            </div>
            <div class="mini-chart-container">
              <canvas id="miniChart3"></canvas>
            </div>
          </a>
        </div>
        <div class="sub-content2-1">
          <p>Total Monthly Guests</p>
          <div class="chart-container">
            <canvas id="guestsChart" aria-label="Guests distribution chart"></canvas>
          </div>
        </div>
      </div>

      <!-- Staff & Homestay Section -->
      <div class="content3">
        <div class="sub-content3-1">
          <p>Staff Distribution</p>
          <div class="revenue-chart-container">
            <canvas id="staffChart" aria-label="Staff distribution chart"></canvas>
            <div class="revenue-center-text">
              <div class="revenue-amount"><span id="totalStaff">14</span></div>
              <div class="revenue-label">Total Staff</div>
            </div>
          </div>
        </div>
        <div class="sub-content3-3-wrapper">
          <div class="sub-content3-3">
          <p>Homestay Revenue</p>
          <div class="revenue-cards-container">
            <div class="revenue-card">
              <div class="revenue-card-content">
                <div class="revenue-image-container">
                  <img src="../images/houseIcon.png" alt="House Icon" class="revenue-house-icon">
                  <div class="revenue-overlay">
                    <div class="revenue-card-amount">RM <span class="revenue-value" data-target="125000">0</span></div>
                  </div>
                </div>
                <div class="revenue-card-label">The Grand Haven</div>
              </div>
            </div>
            <div class="revenue-card">
              <div class="revenue-card-content">
                <div class="revenue-image-container">
                  <img src="../images/houseIcon.png" alt="House Icon" class="revenue-house-icon">
                  <div class="revenue-overlay">
                    <div class="revenue-card-amount">RM <span class="revenue-value" data-target="98000">0</span></div>
                  </div>
                </div>
                <div class="revenue-card-label">Twin Haven</div>
              </div>
            </div>
            <div class="revenue-card">
              <div class="revenue-card-content">
                <div class="revenue-image-container">
                  <img src="../images/houseIcon.png" alt="House Icon" class="revenue-house-icon">
                  <div class="revenue-overlay">
                    <div class="revenue-card-amount">RM <span class="revenue-value" data-target="142000">0</span></div>
                  </div>
                </div>
                <div class="revenue-card-label">The Riverside Retreat</div>
              </div>
            </div>
            <div class="revenue-card">
              <div class="revenue-card-content">
                <div class="revenue-image-container">
                  <img src="../images/houseIcon.png" alt="House Icon" class="revenue-house-icon">
                  <div class="revenue-overlay">
                    <div class="revenue-card-amount">RM <span class="revenue-value" data-target="118000">0</span></div>
                  </div>
                </div>
                <div class="revenue-card-label">Hilltop Haven</div>
              </div>
            </div>
          </div>
        </div>
        <div class="sub-content3-4">
          <p>Total Guests (This Year)</p>
          <div class="guests-cards-container">
            <div class="guests-card">
              <div class="guests-card-content">
                <i class='bx bx-group guests-icon'></i>
                <div class="guests-card-amount"><span class="guests-value" data-target="156">0</span></div>
                <div class="guests-card-label">The Grand Haven</div>
              </div>
            </div>
            <div class="guests-card">
              <div class="guests-card-content">
                <i class='bx bx-group guests-icon'></i>
                <div class="guests-card-amount"><span class="guests-value" data-target="124">0</span></div>
                <div class="guests-card-label">Twin Haven</div>
              </div>
            </div>
            <div class="guests-card">
              <div class="guests-card-content">
                <i class='bx bx-group guests-icon'></i>
                <div class="guests-card-amount"><span class="guests-value" data-target="178">0</span></div>
                <div class="guests-card-label">The Riverside Retreat</div>
              </div>
            </div>
            <div class="guests-card">
              <div class="guests-card-content">
                <i class='bx bx-group guests-icon'></i>
                <div class="guests-card-amount"><span class="guests-value" data-target="142">0</span></div>
                <div class="guests-card-label">Hilltop Haven</div>
              </div>
            </div>
          </div>
        </div>
        </div>
      </div>

      <!-- Recent Guests Table -->
      <div class="content4">
        <div class="new-guests-table-container">
          <div class="table-header-row">
            <p>Recent Guests</p>
            <a href="guests.html" class="btn-manage">Manage Guests</a>
          </div>
          <table class="new-guests-table">
            <thead>
              <tr>
                <th>Guest ID</th>
                <th>Name</th>
                <th>Phone Number</th>
                <th>Gender</th>
                <th>Email</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>G001</td>
                <td>Ahmad bin Abdullah</td>
                <td>+6012-345-6789</td>
                <td>Male</td>
                <td>ahmad.abdullah@email.com</td>
                <td>Regular</td>
              </tr>
              <tr>
                <td>G002</td>
                <td>Siti Nurhaliza</td>
                <td>+6013-456-7890</td>
                <td>Female</td>
                <td>siti.nurhaliza@email.com</td>
                <td>VIP</td>
              </tr>
              <tr>
                <td>G003</td>
                <td>Lim Wei Ming</td>
                <td>+6014-567-8901</td>
                <td>Male</td>
                <td>lim.weiming@email.com</td>
                <td>Regular</td>
              </tr>
              <tr>
                <td>G004</td>
                <td>Fatimah binti Hassan</td>
                <td>+6015-678-9012</td>
                <td>Female</td>
                <td>fatimah.hassan@email.com</td>
                <td>Regular</td>
              </tr>
              <tr>
                <td>G005</td>
                <td>Tan Mei Ling</td>
                <td>+6016-789-0123</td>
                <td>Female</td>
                <td>tan.meiling@email.com</td>
                <td>VIP</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Staff Table -->
      <div class="content4">
        <div class="new-guests-table-container">
          <div class="table-header-row">
            <p>New Staff</p>
            <a href="staff.html" class="btn-manage">Manage Staff</a>
          </div>
          <table class="new-guests-table">
            <thead>
              <tr>
                <th>Staff ID</th>
                <th>Name</th>
                <th>Phone No.</th>
                <th>Email</th>
                <th>Type</th>
                <th>Manager ID</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>S001</td>
                <td>Ali bin Ahmad</td>
                <td>+6011-111-1111</td>
                <td>ali.ahmad@serena.com</td>
                <td>Full Time</td>
                <td>-</td>
              </tr>
              <tr>
                <td>S002</td>
                <td>Sarah binti Mohd</td>
                <td>+6011-222-2222</td>
                <td>sarah.mohd@serena.com</td>
                <td>Part Time</td>
                <td>S001</td>
              </tr>
              <tr>
                <td>S003</td>
                <td>Hassan bin Ismail</td>
                <td>+6011-333-3333</td>
                <td>hassan.ismail@serena.com</td>
                <td>Full Time</td>
                <td>-</td>
              </tr>
              <tr>
                <td>S004</td>
                <td>Nurul binti Ali</td>
                <td>+6011-444-4444</td>
                <td>nurul.ali@serena.com</td>
                <td>Part Time</td>
                <td>S001</td>
              </tr>
              <tr>
                <td>S005</td>
                <td>Lee Wei Jie</td>
                <td>+6011-555-5555</td>
                <td>lee.weijie@serena.com</td>
                <td>Full Time</td>
                <td>-</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Homestay Table -->
      <div class="content4">
        <div class="new-guests-table-container">
          <div class="table-header-row">
            <p>Homestay</p>
            <a href="homestay.html" class="btn-manage">Manage Homestay</a>
          </div>
          <table class="new-guests-table">
            <thead>
              <tr>
                <th>Homestay ID</th>
                <th>Homestay Name</th>
                <th>Address</th>
                <th>Office Phone</th>
                <th>Rent Price (per night)</th>
                <th>Staff ID</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>P001</td>
                <td>The Grand Haven</td>
                <td>Hulu Langat, Selangor</td>
                <td>+603-1234-5678</td>
                <td>RM 250</td>
                <td>S001</td>
              </tr>
              <tr>
                <td>P002</td>
                <td>Twin Haven</td>
                <td>Hulu Langat, Selangor</td>
                <td>+603-1234-5679</td>
                <td>RM 200</td>
                <td>S003</td>
              </tr>
              <tr>
                <td>P003</td>
                <td>The Riverside Retreat</td>
                <td>Gopeng, Perak</td>
                <td>+605-2345-6789</td>
                <td>RM 300</td>
                <td>S005</td>
              </tr>
              <tr>
                <td>P004</td>
                <td>Hilltop Haven</td>
                <td>Gopeng, Perak</td>
                <td>+605-2345-6790</td>
                <td>RM 280</td>
                <td>S001</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2025 Serena Sanctuary. All rights reserved.</p>
      </div>
    </footer>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  let arrow = document.querySelectorAll(".arrow");
  for (var i = 0; i < arrow.length; i++) {
    arrow[i].addEventListener("click", (e)=>{
   let arrowParent = e.target.parentElement.parentElement;//selecting main parent of arrow
   arrowParent.classList.toggle("showMenu");
    });
  }
  let sidebar = document.querySelector(".sidebar");
  let sidebarBtn = document.querySelector(".bx-menu");
  console.log(sidebarBtn);
  sidebarBtn.addEventListener("click", ()=>{
    sidebar.classList.toggle("close");
  });

  // Date display
  const dateLine = document.querySelector(".date-line");
  if (dateLine) {
    const now = new Date();
    const format = new Intl.DateTimeFormat("en-GB", { day: "numeric", month: "long", year: "numeric" });
    const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
    const monthEnd = new Date(now.getFullYear(), now.getMonth() + 1, 0);
    dateLine.textContent = `${format.format(monthStart)} - ${format.format(monthEnd)}`;
  }

  // Guests Chart - Bar Chart
  const guestsChartCanvas = document.getElementById("guestsChart");
  if (guestsChartCanvas) {
    const monthLabels = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    const guestsData = [45, 52, 48, 61, 58, 67, 73, 65, 59, 54, 49, 42];
    
    new Chart(guestsChartCanvas, {
      type: "bar",
      data: {
        labels: monthLabels,
        datasets: [{
          label: "New Guests",
          data: guestsData,
          backgroundColor: "#00bf63",
          barThickness: 24,
        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          },
        },
        scales: {
          x: {
            grid: {
              display: false,
            },
          },
          y: {
            beginAtZero: true,
            grid: {
              color: "rgba(0,0,0,0.05)",
            },
          },
        },
      },
    });
  }


  // Mini Charts for Subcards
  const miniChart1 = document.getElementById("miniChart1");
  if (miniChart1) {
    new Chart(miniChart1, {
      type: "line",
      data: {
        labels: ["", "", "", "", "", "", ""],
        datasets: [{
          data: [1, 4, 2, 5, 3, 6, 9],
          borderColor: "#00bf63",
          backgroundColor: "rgba(0, 191, 99, 0.1)",
          borderWidth: 2,
          fill: true,
          tension: 0,
          pointRadius: 0,
        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
        },
        scales: {
          x: { display: false },
          y: { display: false },
        },
      },
    });
  }

  const miniChart2 = document.getElementById("miniChart2");
  if (miniChart2) {
    new Chart(miniChart2, {
      type: "line",
      data: {
        labels: ["", "", "", "", "", "", ""],
        datasets: [{
          data: [8, 3, 5, 4, 3, 10, 7],
          borderColor: "#38b6ff",
          backgroundColor: "rgba(56, 182, 255, 0.1)",
          borderWidth: 2,
          fill: true,
          tension: 0,
          pointRadius: 0,
        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
        },
        scales: {
          x: { display: false },
          y: { display: false },
        },
      },
    });
  }

  const miniChart3 = document.getElementById("miniChart3");
  if (miniChart3) {
    new Chart(miniChart3, {
      type: "line",
      data: {
        labels: ["", "", "", "", "", "", ""],
        datasets: [{
          data: [4, 5, 14, 2, 13, 3, 12],
          borderColor: "#ffde59",
          backgroundColor: "rgba(255, 222, 89, 0.1)",
          borderWidth: 2,
          fill: true,
          tension: 0,
          pointRadius: 0,
        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
        },
        scales: {
          x: { display: false },
          y: { display: false },
        },
      },
    });
  }

  // Staff Chart - Doughnut Chart
  const staffChartCanvas = document.getElementById("staffChart");
  if (staffChartCanvas) {
    const staffTypes = ["Full Time", "Part Time"];
    const staffValues = [9, 5];
    
    new Chart(staffChartCanvas, {
      type: 'doughnut',
      data: {
        labels: staffTypes,
        datasets: [{
          data: staffValues,
          backgroundColor: ['#38b6ff', '#ffde59'],
          borderWidth: 0,
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        plugins: {
          legend: {
            display: false,
          },
        },
        cutout: '75%',
      }
    });
  }


  // Animated Revenue Cards
  function animateValue(element, start, end, duration) {
    let startTimestamp = null;
    const step = (timestamp) => {
      if (!startTimestamp) startTimestamp = timestamp;
      const progress = Math.min((timestamp - startTimestamp) / duration, 1);
      const current = Math.floor(progress * (end - start) + start);
      element.textContent = current.toLocaleString();
      if (progress < 1) {
        window.requestAnimationFrame(step);
      }
    };
    window.requestAnimationFrame(step);
  }

  const revenueValues = document.querySelectorAll('.revenue-value');
  revenueValues.forEach((element) => {
    const target = parseInt(element.getAttribute('data-target'));
    animateValue(element, 0, target, 2000);
  });

  const guestsValues = document.querySelectorAll('.guests-value');
  guestsValues.forEach((element) => {
    const target = parseInt(element.getAttribute('data-target'));
    animateValue(element, 0, target, 2000);
  });
  </script>
</body>
</html>
